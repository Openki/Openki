<template name="userprofile">
	<div class="container-sm">
		<div class="page-component">
			<h2>
				{{mf 'profile.users_profile_page' "{NAME}'s Profile" NAME=this.user.username}}
			</h2>
			{{#if ownuser}}
				<h4>
					{{mf 'profile.its_you' "It's you!"}}&nbsp;
				</h4>
				<a class="page-link" href="/profile/">
					<span class="fa fa-cogs fa-fw" aria-hidden="true"></span>
					{{mf 'profile.preferenceslink' "Click here to change your preferences"}}
				</a>
			{{else}}
				{{#if acceptsMessages}}
					{{> sendMessage recipientId=user._id}}
				{{/if}}
			{{/if}}
			{{#if showSettings}}
				<div class="form-group">
					{{#if showPrivileges}}
						<div class="form-group-element">
							<label class="label-lg">
								<span class="fa fa-cog fa-fw" aria-hidden="true"></span>
								{{mf 'privileges.title' 'Edit Privileges'}}
							</label>
							<div class="list-group">
								{{#if privileges.admin}}
									<li class="list-group-item list-group-item-success">
										{{mf 'privilege.has.admin' 'Administrator privileges granted'}}
										{{#if alterPrivileges}}
											<button type="button" class="js-remove-privilege-btn close"
												data-tooltip="{{mf 'privilege.remove' 'Remove privilege'}}"
												data-priv="admin">
												&times;
											</button>
										{{/if}}
									</li>
								{{else}}
									{{#if alterPrivileges}}
											<button type="button" class="giveAdmin list-group-item">
												{{mf 'privilege.add.admin' 'Grant administrator privileges'}}
											</button>
									{{/if}}
								{{/if}}
							</div>
						</div>
					{{/if}}

					{{#if showInviteGroups}}
						<div class="form-group-element">
							<label class="label-lg">
								<span class="fa fa-cog fa-fw" aria-hidden="true"></span>
								{{mf 'userprofile.groups.header' 'Edit groups'}}
							</label>
							<div class="list-group">
								{{#each inviteGroups}}
										{{#if groupMember this ../user}}
										<li class="list-group-item list-group-item-success">
											{{mf 'profile.group.member' 'Member of group '}}
											<span class="group">{{name}}</span>
											<button type="button" class="js-group-expel-btn close"
												data-tooltip="{{mf 'profile.group.expel' 'Expel from group {GROUPNAME}' GROUPNAME=this.name}}">
												&times;
											</button>
										</li>
										{{else}}
											<button type="button" class="draftIntoGroup list-group-item">
												{{mf 'profile.group.draft' 'Draft into group '}}
												{{name}}
											</button>
										{{/if}}
								{{/each}}
							</div>
						</div>
					{{/if}}
				</div>
			{{/if}}
		</div>
		{{> usersCourselist profileData=this ownProfile=false}}
	</div>
</template>
